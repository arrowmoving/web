// --- TRANSLATION DATA ---
const translations = {
    en: {
        navHome: "Home",
        navServices: "Services",
        navAbout: "About",
        navGuides: "Moving Guides",
        navContact: "Contact",
        navCallNow: "Call Now",
        heroTitle: "Professional Moving Services in Toronto & GTA",
        heroSubtitle: "Reliable, efficient, and affordable moving for your home or business.",
        formTitle: "Get a Quick Estimate",
        formMovingDate: "Moving Date *",
        formMovingFrom: "Moving From *",
        formMovingTo: "Moving To *",
        formServiceType: "Service Type *",
        formServiceSelect: "Select a service",
        formServiceResidential: "Residential Moving",
        formServiceLongDistance: "Long-Distance Moving",
        formServicePacking: "Packing Services",
        formServiceCommercial: "Commercial/Office Moving",
        formServiceSpecialty: "Specialty Item Moving",
        formGetEstimate: "Get Estimate",
        servicesTitle: "Our Moving Services",
        service1Title: "Residential Moving",
        service1Desc: "Expert movers for seamless home and apartment relocations across the GTA. We handle everything with care.",
        service2Title: "Long-Distance Moving",
        service2Desc: "Reliable long-distance services for moves within Ontario and across Canada. We ensure a smooth transition.",
        service3Title: "Packing & Unpacking",
        service3Desc: "Stress-free packing and unpacking services using high-quality materials to secure your belongings.",
        service4Title: "Commercial Logistics",
        service4Desc: "Efficient and professional office and commercial relocation services with minimal disruption to your business operations.",
        service5Title: "Specialty Item Moving",
        service5Desc: "Safe and secure transport for your valuable and delicate items, including pianos, art, and antiques.",
        guidesTitle: "Helpful Moving Guides",
        guide1Title: "Ultimate Packing Guide",
        guide2Title: "Choosing a Mover",
        guide3Title: "Moving Day Checklist",
        guide4Title: "Moving with Pets",
        guide5Title: "Understanding Quotes",
        guide1Content: "Start early and pack room by room. Use sturdy boxes and label them clearly with contents and destination room. Pack heavy items in small boxes and light items in large ones. Use packing paper or bubble wrap for fragile items and don't leave empty spaces in boxes.",
        guide2Content: "Look for licensed and insured companies. Check reviews and ask for references. Get at least three in-home estimates to compare costs and services. A reputable mover will provide a detailed inventory and a clear, written estimate with no hidden fees.",
        guide3Content: "Confirm arrival time with your movers. Protect your floors and carpets. Pack a 'first night' box with essentials like toiletries, chargers, and basic tools. Do a final walkthrough of your old home to ensure nothing is left behind.",
        guide4Content: "Keep your pet in a quiet, secure room on moving day to reduce stress. Transport them in a comfortable carrier in your own vehicle. Once at the new home, set up a familiar space for them with their bed, toys, food, and water before letting them explore.",
        guide5Content: "A binding estimate guarantees the total cost based on the inventory. A non-binding estimate is a projection, and the final cost could change. Always get your quote in writing and understand what services are included (packing, materials, insurance, etc.).",
        contactModalTitle: "Almost there! Provide your details.",
        formFullName: "Full Name *",
        formEmail: "Email *",
        formPhone: "Phone Number *",
        formDetails: "Additional Details",
        formRequestEstimate: "Request Free Estimate",
        formSuccessMessage: "Thank you! We'll contact you within 24 hours with your free estimate."
    },
    fr: {
        navHome: "Accueil",
        navServices: "Services",
        navAbout: "À propos",
        navGuides: "Guides de Déménagement",
        navContact: "Contact",
        navCallNow: "Appelez maintenant",
        heroTitle: "Services de Déménagement Professionnels à Toronto & GTA",
        heroSubtitle: "Déménagement fiable, efficace et abordable pour votre maison ou votre entreprise.",
        formTitle: "Obtenez une Estimation Rapide",
        formMovingDate: "Date du déménagement *",
        formMovingFrom: "Déménagement de *",
        formMovingTo: "Déménagement vers *",
        formServiceType: "Type de service *",
        formServiceSelect: "Sélectionnez un service",
        formServiceResidential: "Déménagement Résidentiel",
        formServiceLongDistance: "Déménagement Longue Distance",
        formServicePacking: "Services d'Emballage",
        formServiceCommercial: "Déménagement Commercial/Bureau",
        formServiceSpecialty: "Déménagement d'Articles Spéciaux",
        formGetEstimate: "Obtenir une estimation",
        servicesTitle: "Nos Services de Déménagement",
        service1Title: "Déménagement Résidentiel",
        service1Desc: "Déménageurs experts pour des relocalisations de maisons et d'appartements sans faille dans le Grand Toronto.",
        service2Title: "Déménagement Longue Distance",
        service2Desc: "Services fiables de longue distance pour des déménagements en Ontario et à travers le Canada.",
        service3Title: "Emballage et Déballage",
        service3Desc: "Services d'emballage et de déballage sans stress utilisant des matériaux de haute qualité.",
        service4Title: "Logistique Commerciale",
        service4Desc: "Services de relocalisation de bureaux et commerciaux efficaces et professionnels avec une perturbation minimale.",
        service5Title: "Déménagement d'Articles Spéciaux",
        service5Desc: "Transport sûr et sécurisé pour vos articles de valeur et délicats, y compris les pianos, l'art et les antiquités.",
        guidesTitle: "Guides de Déménagement Utiles",
        guide1Title: "Guide d'Emballage Ultime",
        guide2Title: "Choisir un Déménageur",
        guide3Title: "Liste de Contrôle du Jour du Déménagement",
        guide4Title: "Déménager avec des Animaux",
        guide5Title: "Comprendre les Devis",
        guide1Content: "Commencez tôt et emballez pièce par pièce. Utilisez des boîtes solides et étiquetez-les clairement. Emballez les articles lourds dans de petites boîtes et les articles légers dans de grandes.",
        guide2Content: "Recherchez des entreprises licenciées et assurées. Consultez les avis et demandez des références. Obtenez au moins trois estimations à domicile pour comparer.",
        guide3Content: "Confirmez l'heure d'arrivée avec vos déménageurs. Protégez vos sols. Préparez une boîte 'première nuit' avec les essentiels. Faites un dernier tour de votre ancienne maison.",
        guide4Content: "Gardez votre animal dans une pièce calme le jour du déménagement. Transportez-le dans une cage confortable dans votre propre véhicule. Dans la nouvelle maison, préparez-lui un espace familier.",
        guide5Content: "Une estimation contractuelle garantit le coût total. Une estimation non contractuelle est une projection. Obtenez toujours votre devis par écrit et comprenez ce qui est inclus.",
        contactModalTitle: "Presque terminé ! Fournissez vos coordonnées.",
        formFullName: "Nom complet *",
        formEmail: "Email *",
        formPhone: "Numéro de téléphone *",
        formDetails: "Détails supplémentaires",
        formRequestEstimate: "Demander une estimation gratuite",
        formSuccessMessage: "Merci ! Nous vous contacterons dans les 24 heures avec votre estimation gratuite."
    },
    es: {
        navHome: "Inicio",
        navServices: "Servicios",
        navAbout: "Sobre nosotros",
        navGuides: "Guías de Mudanza",
        navContact: "Contacto",
        navCallNow: "Llama ahora",
        heroTitle: "Servicios de Mudanza Profesional en Toronto y GTA",
        heroSubtitle: "Mudanza confiable, eficiente y asequible para su hogar o negocio.",
        formTitle: "Obtenga un Presupuesto Rápido",
        formMovingDate: "Fecha de la mudanza *",
        formMovingFrom: "Mover desde *",
        formMovingTo: "Mover a *",
        formServiceType: "Tipo de servicio *",
        formServiceSelect: "Seleccione un servicio",
        formServiceResidential: "Mudanza Residencial",
        formServiceLongDistance: "Mudanza de Larga Distancia",
        formServicePacking: "Servicios de Empaque",
        formServiceCommercial: "Mudanza Comercial/Oficina",
        formServiceSpecialty: "Mudanza de Artículos Especiales",
        formGetEstimate: "Obtener Presupuesto",
        servicesTitle: "Nuestros Servicios de Mudanza",
        service1Title: "Mudanza Residencial",
        service1Desc: "Expertos en mudanzas para traslados de casas y apartamentos sin problemas en todo el GTA.",
        service2Title: "Mudanza de Larga Distancia",
        service2Desc: "Servicios confiables de larga distancia para mudanzas dentro de Ontario y en todo Canadá.",
        service3Title: "Empaque y Desempaque",
        service3Desc: "Servicios de empaque y desempaque sin estrés utilizando materiales de alta calidad.",
        service4Title: "Logística Comercial",
        service4Desc: "Servicios de reubicación de oficinas y comerciales eficientes y profesionales con una interrupción mínima.",
        service5Title: "Mudanza de Artículos Especiales",
        service5Desc: "Transporte seguro para sus artículos valiosos y delicados, incluyendo pianos, arte y antigüedades.",
        guidesTitle: "Guías de Mudanza Útiles",
        guide1Title: "Guía Definitiva de Empaque",
        guide2Title: "Elegir una Empresa de Mudanzas",
        guide3Title: "Lista de Verificación del Día de la Mudanza",
        guide4Title: "Mudanza con Mascotas",
        guide5Title: "Entender los Presupuestos",
        guide1Content: "Comience temprano y empaque habitación por habitación. Use cajas resistentes y etiquételas claramente. Empaque artículos pesados en cajas pequeñas y artículos ligeros en cajas grandes.",
        guide2Content: "Busque empresas con licencia y seguro. Revise las reseñas y pida referencias. Obtenga al menos tres presupuestos en el hogar para comparar.",
        guide3Content: "Confirme la hora de llegada con su empresa de mudanzas. Proteja sus pisos. Empaque una caja de 'primera noche' con lo esencial. Haga una última revisión de su antigua casa.",
        guide4Content: "Mantenga a su mascota en una habitación tranquila el día de la mudanza. Transpórtela en un transportín cómodo en su propio vehículo. En el nuevo hogar, prepare un espacio familiar para ella.",
        guide5Content: "Un presupuesto vinculante garantiza el costo total. Un presupuesto no vinculante es una proyección. Siempre obtenga su presupuesto por escrito y entienda qué servicios incluye.",
        contactModalTitle: "¡Casi listo! Proporcione sus datos.",
        formFullName: "Nombre completo *",
        formEmail: "Correo electrónico *",
        formPhone: "Número de teléfono *",
        formDetails: "Detalles adicionales",
        formRequestEstimate: "Solicitar presupuesto gratuito",
        formSuccessMessage: "¡Gracias! Nos pondremos en contacto con usted en 24 horas con su presupuesto gratuito."
    },
    hi: {
        navHome: "होम",
        navServices: "सेवाएं",
        navAbout: "हमारे बारे में",
        navGuides: "मूविंग गाइड",
        navContact: "संपर्क करें",
        navCallNow: "अभी कॉल करें",
        heroTitle: "टोरंटो और जीटीए में पेशेवर मूविंग सेवाएँ",
        heroSubtitle: "आपके घर या व्यवसाय के लिए विश्वसनीय, कुशल और सस्ती मूविंग।",
        formTitle: "एक त्वरित अनुमान प्राप्त करें",
        formMovingDate: "मूविंग की तारीख *",
        formMovingFrom: "कहाँ से मूव करें *",
        formMovingTo: "कहाँ जाना है *",
        formServiceType: "सेवा का प्रकार *",
        formServiceSelect: "एक सेवा चुनें",
        formServiceResidential: "आवासीय मूविंग",
        formServiceLongDistance: "लंबी दूरी की मूविंग",
        formServicePacking: "पैकिंग सेवाएं",
        formServiceCommercial: "वाणिज्यिक/कार्यालय मूविंग",
        formServiceSpecialty: "विशेष आइटम मूविंग",
        formGetEstimate: "अनुमान प्राप्त करें",
        servicesTitle: "हमारी मूविंग सेवाएँ",
        service1Title: "आवासीय मूविंग",
        service1Desc: "जीटीए में घर और अपार्टमेंट के स्थानांतरण के लिए विशेषज्ञ मूवर्स। हम हर चीज का ध्यान रखते हैं।",
        service2Title: "लंबी दूरी की मूविंग",
        service2Desc: "ओंटारियो और पूरे कनाडा में चाल के लिए विश्वसनीय लंबी दूरी की सेवाएं।",
        service3Title: "पैकिंग और अनपैकिंग",
        service3Desc: "उच्च गुणवत्ता वाली सामग्री का उपयोग करके तनाव-मुक्त पैकिंग और अनपैकिंग सेवाएं।",
        service4Title: "वाणिज्यिक लॉजिस्टिक्स",
        service4Desc: "न्यूनतम व्यवधान के साथ कुशल और पेशेवर कार्यालय और वाणिज्यिक स्थानांतरण सेवाएं।",
        service5Title: "विशेष आइटम मूविंग",
        service5Desc: "पियानो, कला और प्राचीन वस्तुओं सहित आपके मूल्यवान और नाजुक सामानों के लिए सुरक्षित परिवहन।",
        guidesTitle: "उपयोगी मूविंग गाइड",
        guide1Title: "अंतिम पैकिंग गाइड",
        guide2Title: "एक मूवर कैसे चुनें",
        guide3Title: "मूविंग डे चेकलिस्ट",
        guide4Title: "पालतू जानवरों के साथ मूविंग",
        guide5Title: "कोटेशन को समझना",
        guide1Content: "जल्दी शुरू करें और कमरे के हिसाब से पैक करें। मजबूत बक्सों का उपयोग करें और उन पर स्पष्ट रूप से लेबल लगाएं। भारी सामान छोटे बक्सों में और हल्का सामान बड़े बक्सों में पैक करें।",
        guide2Content: "लाइसेंस प्राप्त और बीमाकृत कंपनियों की तलाश करें। समीक्षाएं देखें और संदर्भ मांगें। तुलना करने के लिए कम से कम तीन इन-होम अनुमान प्राप्त करें।",
        guide3Content: "अपने मूवर्स के साथ आगमन के समय की पुष्टि करें। अपने फर्श को सुरक्षित रखें। आवश्यक चीजों के साथ एक 'पहली रात' का बॉक्स पैक करें। अपने पुराने घर का अंतिम चक्कर लगाएं।",
        guide4Content: "चलते-फिरते दिन अपने पालतू जानवर को एक शांत कमरे में रखें। उन्हें अपने वाहन में एक आरामदायक वाहक में ले जाएं। नए घर में, उनके लिए एक परिचित स्थान स्थापित करें।",
        guide5Content: "एक बाध्यकारी अनुमान कुल लागत की गारंटी देता है। एक गैर-बाध्यकारी अनुमान एक प्रक्षेपण है। हमेशा अपना उद्धरण लिखित में प्राप्त करें और समझें कि कौन सी सेवाएं शामिल हैं।",
        contactModalTitle: "लगभग हो गया! अपना विवरण प्रदान करें।",
        formFullName: "पूरा नाम *",
        formEmail: "ईमेल *",
        formPhone: "फ़ोन नंबर *",
        formDetails: "अतिरिक्त विवरण",
        formRequestEstimate: "मुफ्त अनुमान का अनुरोध करें",
        formSuccessMessage: "धन्यवाद! हम आपके मुफ्त अनुमान के साथ 24 घंटे के भीतर आपसे संपर्क करेंगे।"
    }
};


document.addEventListener('DOMContentLoaded', () => {

    // --- LANGUAGE SWITCHER LOGIC ---
    const languageSelector = document.getElementById('languageSelector');
    const setLanguage = (lang) => {
        document.documentElement.lang = lang;
        document.querySelectorAll('[data-lang-key]').forEach(element => {
            const key = element.getAttribute('data-lang-key');
            if (translations[lang] && translations[lang][key]) {
                element.textContent = translations[lang][key];
            }
        });
    };

    languageSelector.addEventListener('change', (event) => {
        setLanguage(event.target.value);
    });

    // Set initial language
    setLanguage('en');

    // --- MODAL LOGIC ---
    const contactModal = document.getElementById('contact-details-modal');
    const heroForm = document.getElementById('heroForm');

    // Function to open any modal
    const openModal = (modal) => {
        modal.classList.add('active');
    };

    // Function to close any modal
    const closeModal = (modal) => {
        modal.classList.remove('active');
    };
    
    // Handle Hero Form submission (Step 1)
    heroForm.addEventListener('submit', (e) => {
        e.preventDefault(); // Prevent actual form submission
        
        // Get values from the hero form
        const movingDate = document.getElementById('date').value;
        const movingFrom = document.getElementById('origin').value;
        const movingTo = document.getElementById('destination').value;
        const serviceType = document.getElementById('service').value;

        // Pass values to the hidden fields in the contact modal
        document.getElementById('modalMovingDate').value = movingDate;
        document.getElementById('modalMovingFrom').value = movingFrom;
        document.getElementById('modalMovingTo').value = movingTo;
        document.getElementById('modalServiceType').value = serviceType;

        // Open the contact details modal
        openModal(contactModal);
    });

    // --- GUIDE MODALS LOGIC ---
    document.querySelectorAll('[data-modal-target]').forEach(card => {
        card.addEventListener('click', () => {
            const modalId = card.getAttribute('data-modal-target');
            const modal = document.getElementById(modalId);
            if(modal) openModal(modal);
        });
    });

    // Add event listeners to all close buttons
    document.querySelectorAll('.modal-close-btn').forEach(button => {
        button.addEventListener('click', () => {
            const modal = button.closest('.modal');
            if(modal) closeModal(modal);
        });
    });

    // Close modal if user clicks outside of the content
    window.addEventListener('click', (event) => {
        if (event.target.classList.contains('modal')) {
            closeModal(event.target);
        }
    });


    // --- ORIGINAL SCRIPT FUNCTIONALITY ---

    // Mobile Menu Toggle
    window.toggleMobileMenu = function() {
        const mobileNav = document.getElementById('mobileNav');
        mobileNav.classList.toggle('active');
    }

    // FAQ Toggle
    window.toggleFaq = function(element) {
        const answer = element.nextElementSibling;
        const symbol = element.querySelector('span:last-child');
        
        if (answer.classList.contains('active')) {
            answer.classList.remove('active');
            symbol.textContent = '+';
        } else {
            document.querySelectorAll('.faq-answer.active').forEach(openAnswer => {
                openAnswer.classList.remove('active');
                openAnswer.previousElementSibling.querySelector('span:last-child').textContent = '+';
            });
            answer.classList.add('active');
            symbol.textContent = '−';
        }
    }

    // Smooth scrolling for navigation links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const targetId = this.getAttribute('href');
            const targetElement = document.querySelector(targetId);
            if (targetElement) {
                targetElement.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });

    // Add scroll effect to header
    window.addEventListener('scroll', function() {
        const header = document.querySelector('header');
        if (window.scrollY > 100) {
            header.style.boxShadow = '0 4px 6px rgba(0,0,0,0.1)';
        } else {
            header.style.boxShadow = '0 2px 4px rgba(0,0,0,0.1)';
        }
    });

    // Lazy loading animation for cards
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.animation = `fadeInUp 0.6s ease forwards`;
                observer.unobserve(entry.target);
            }
        });
    }, { threshold: 0.1 });

    document.querySelectorAll('.service-card, .review-card, .guide-card').forEach(card => {
        card.style.opacity = '0';
        observer.observe(card);
    });

    // Set minimum date to today for moving date input
    const today = new Date().toISOString().split('T')[0];
    document.getElementById('date').setAttribute('min', today);
});
